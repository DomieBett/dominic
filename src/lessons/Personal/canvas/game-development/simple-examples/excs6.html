<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animations</title>
    <link rel="stylesheet" href="./styles/styles.css">
    <script src="./javascript/drawing.js"></script>
</head>
<body>
    <canvas id="asteroids" width="400" height="400"></canvas>

    <script>
        let context = document.getElementById('asteroids').getContext('2d');

        context.strokeStyle = 'white';
        context.lineWidth = 1.5;

        let x = 0, y = context.canvas.height / 5, radius = 20;
        let yspeed = 0, gravity = 0.1, xspeed = 1.5;
        let mouth = 0;

        function frame() {
            context.clearRect(0, 0, context.canvas.width, context.canvas.height);
            draw(context);
            update();
        }

        function update() {
            x += xspeed;
            y += yspeed;
            yspeed += gravity;

            if (y >= context.canvas.height - radius) {
                y = context.canvas.height - radius;
                yspeed *= -0.6
                xspeed *= 0.95;
            }
            
            if (x >= context.canvas.width - radius || x <= 0) {
                xspeed *= -1;
                // x = (x + context.canvas.width) % context.canvas.width;
            }

            mouth = Math.abs(Math.sin(6 * Math.PI * x / (context.canvas.width)));
        }

        function draw(ctx) {
            drawGrid(ctx);

            ctx.save();
            ctx.translate(x, y);
            drawPacman(ctx, radius, mouth);
            ctx.restore();
        }

        setInterval(frame, 1000.0/60.0); // 60fps
    </script>
</body>
</html>
